# ЁЯС┤ЁЯС╡ Elderly Community Platform (Backend API)

р╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М Backend р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ър╕Ыр╕Пр╕┤р╕Чр╕┤р╕Щр╣Бр╕ер╕░р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Кр╕╕р╕бр╕Кр╕Щр╕Ьр╕╣р╣Йр╕кр╕╣р╕Зр╕нр╕▓р╕вр╕╕ р╕Юр╕▒р╕Тр╕Щр╕▓р╕Фр╣Йр╕зр╕в **Node.js**, **Express**, **TypeScript** р╣Бр╕ер╕░ **MongoDB**

р╕гр╕░р╕Ър╕Ър╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ:
- тЬЕ **Authentication:** р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б / р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ (JWT)
- тЬЕ **Authorization:** р╣Бр╕вр╕Бр╕кр╕┤р╕Чр╕Шр╕┤р╣М Admin (р╕Др╕Щр╕Ир╕▒р╕Фр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б) р╣Бр╕ер╕░ User (р╕Ьр╕╣р╣Йр╕кр╕╣р╕Зр╕нр╕▓р╕вр╕╕)
- тЬЕ **Activity CRUD:** р╕кр╕гр╣Йр╕▓р╕З, р╣Бр╕Бр╣Йр╣Др╕В, р╕ер╕Ъ р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б (Admin only)
- тЬЕ **Booking System:** р╕Ир╕нр╕Зр╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕бр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б р╣Бр╕ер╕░р╣Ар╕Кр╣Зр╕Др╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Ир╕нр╕З (User only)

---

## ЁЯЫая╕П Tech Stack
- **Runtime:** Node.js
- **Language:** TypeScript
- **Framework:** Express.js
- **Database:** MongoDB (Atlas) + Mongoose
- **Auth:** JSON Web Token (JWT) + bcryptjs

---

## тЪЩя╕П р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╕░р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М (Installation)

### 1. Clone р╣Бр╕ер╕░р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Library
```bash
# 1. р╣Бр╕Хр╕Бр╣Др╕Яр╕ер╣М Zip р╕лр╕гр╕╖р╕н Clone р╕ер╕Зр╕бр╕▓
# 2. р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З dependencies (р╕лр╣Йр╕▓р╕бр╕ер╕╖р╕б!)
npm install
```

### 2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Environment Variables
р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `.env` р╕Чр╕╡р╣И root folder (р╕гр╕░р╕Фр╕▒р╕Ър╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Ъ package.json) р╣Бр╕ер╕░р╣Гр╕кр╣Ир╕Др╣Ир╕▓р╕Хр╕▓р╕бр╕Щр╕╡р╣Й:

```env
PORT=5000

# тЪая╕П Link р╕Ир╕▓р╕Бр╣Ар╕гр╕▓р╕кр╣Ир╕Зр╣Гр╕лр╣Йр╣Гр╕Щр╣Др╕ер╕Щр╣Мр╕Щр╕░ (р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щ mongodb+srv://...)
MONGO_URI=р╕зр╕▓р╕З_Link_р╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Ир╕▓р╕Бр╣Ар╕гр╕▓_р╕Хр╕гр╕Зр╕Щр╕╡р╣Й

# р╣Гр╕кр╣Ир╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕бр╕▒р╣Ир╕зр╣Ж р╕вр╕▓р╕зр╣Ж р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Ыр╣Зр╕Щр╕Бр╕╕р╕Нр╣Бр╕Ир╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕к Token
JWT_SECRET=mysupersecretkey123456
```

### 3. р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕е (Data Seeding) ЁЯкД
р╕Цр╣Йр╕▓ Database р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕е р╣Гр╕лр╣Йр╕гр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕З Admin р╣Бр╕ер╕░р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З:

```bash
# р╕кр╕гр╣Йр╕▓р╕З Admin (admin / admin1234)
npx ts-node src/createAdmin.ts

# р╣Ар╕кр╕Бр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б 40 р╕гр╕▓р╕вр╕Бр╕▓р╕г
npx ts-node src/seed.ts
```

### 4. р╕гр╕▒р╕Щ Server ЁЯЪА
```bash
npm run dev
```
Server р╕Ир╕░р╕гр╕▒р╕Щр╕Чр╕╡р╣И: `http://localhost:5000`

---

## ЁЯУб API Documentation (р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ API)

### ЁЯФР 1. Authentication (р╕гр╕░р╕Ър╕Ър╕кр╕бр╕▓р╕Кр╕┤р╕Б)

| Method | Endpoint | Description | Body (JSON) |
| :--- | :--- | :--- | :--- |
| `POST` | `/api/register` | р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б (User) | `{ "username": "...", "password": "...", "phone": "..." }` |
| `POST` | `/api/login` | р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ (р╣Др╕Фр╣Й Token) | `{ "username": "...", "password": "..." }` |

> **тЪая╕П р╕кр╕│р╕Др╕▒р╕Н:** р╣Ар╕бр╕╖р╣Ир╕н Login р╕кр╕│р╣Ар╕гр╣Зр╕И р╕Ир╕░р╣Др╕Фр╣Й `token` р╕Бр╕ер╕▒р╕Ър╕бр╕▓ р╣Гр╕лр╣Й Frontend р╣Ар╕Бр╣Зр╕Ъ Token р╕Щр╕╡р╣Йр╣Др╕зр╣Й р╣Бр╕ер╕░р╕кр╣Ир╕Зр╕бр╕▓р╣Гр╕Щ Header р╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╣Ар╕гр╕╡р╕вр╕Б API р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щ (Booking / Admin Actions)
> **Header Format:** `Authorization: Bearer <token_here>`

### ЁЯУЕ 2. Activities (р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б)

| Method | Endpoint | Access | Description |
| :--- | :--- | :--- | :--- |
| `GET` | `/api/activities` | Public | р╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (40 р╕гр╕▓р╕вр╕Бр╕▓р╕г) |
| `GET` | `/api/activities/:id` | Public | р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Хр╕▓р╕б ID |
| `POST` | `/api/activities` | **Admin** ЁЯФТ | р╕кр╕гр╣Йр╕▓р╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╣Гр╕лр╕бр╣И |
| `PUT` | `/api/activities/:id` | **Admin** ЁЯФТ | р╣Бр╕Бр╣Йр╣Др╕Вр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б |
| `DELETE` | `/api/activities/:id` | **Admin** ЁЯФТ | р╕ер╕Ър╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б |

**р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З JSON р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕гр╣Йр╕▓р╕З/р╣Бр╕Бр╣Йр╣Др╕Вр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б:**
```json
{
  "title": "р╕гр╕│р╣Др╕Чр╣Ар╕Бр╣Кр╕Бр╕вр╕▓р╕бр╣Ар╕Кр╣Йр╕▓",
  "description": "р╕Ър╕гр╕┤р╕лр╕▓р╕гр╕гр╣Ир╕▓р╕Зр╕Бр╕▓р╕вр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕╕р╕Вр╕ар╕▓р╕Ю...",
  "category": "р╕кр╕╕р╕Вр╕ар╕▓р╕Ю",
  "date": "2025-12-01",
  "location": "р╕кр╕зр╕Щр╕кр╕▓р╕Шр╕▓р╕гр╕Ур╕░",
  "maxParticipants": 30
}
```

### ЁЯОл 3. Booking (р╕гр╕░р╕Ър╕Ър╕Ир╕нр╕З)

| Method | Endpoint | Access | Description |
| :--- | :--- | :--- | :--- |
| `POST` | `/api/activities/:id/join` | **User** ЁЯФТ | р╕Бр╕Фр╕Ир╕нр╕Зр╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕бр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б (р╣Ар╕Кр╣Зр╕Др╕Чр╕╡р╣Ир╕зр╣Ир╕▓р╕З + р╕Ир╕нр╕Зр╕Лр╣Йр╕│р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤) |
| `GET` | `/api/my-bookings` | **User** ЁЯФТ | р╕Фр╕╣р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Чр╕╡р╣Ир╕Йр╕▒р╕Щр╣Ар╕Др╕вр╕Ир╕нр╕Зр╣Др╕зр╣Й |

---

## ЁЯУВ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М
```text
src/
тФЬтФАтФА config/         # connectDB logic
тФЬтФАтФА models/         # Database Schema (Activity, User, Booking)
тФЬтФАтФА middleware/     # Auth logic (Check Token)
тФЬтФАтФА server.ts       # Main entry point & Routes
тФЬтФАтФА seed.ts         # Script р╣Ар╕кр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б
тФФтФАтФА createAdmin.ts  # Script р╕кр╕гр╣Йр╕▓р╕З Admin
```

## тЪая╕П р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕╕р╕Бр╕Др╕Щ
* **р╕нр╕вр╣Ир╕▓р╕ер╕╖р╕бр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `.env`** р╕Бр╣Ир╕нр╕Щр╕гр╕▒р╕Щ р╣Др╕бр╣Ир╕Зр╕▒р╣Йр╕Щр╕Хр╣Ир╕н Database р╣Др╕бр╣Ир╕Хр╕┤р╕Ф
* р╕Цр╣Йр╕▓р╕Ир╕░р╣Ар╕Чр╕кр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ъ р╣Гр╕лр╣Й Login р╣Ар╕нр╕▓ Token р╕Бр╣Ир╕нр╕Щр╣Ар╕кр╕бр╕н
* **Admin Account:** `admin` / `admin1234`