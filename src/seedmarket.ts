import mongoose from 'mongoose';
import dotenv from 'dotenv';
import MarketItem from './models/MarketItem';
import User from './models/User';

dotenv.config();

const seedMarket = async () => {
  try {
    // 1. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database
    await mongoose.connect(process.env.MONGO_URI as string);
    console.log("üîå Connected to DB...");

    // 2. ‡∏´‡∏≤‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢ (‡πÄ‡∏≠‡∏≤ User ‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô Admin)
    const seller = await User.findOne();
    if (!seller) {
      console.log("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö User ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏±‡∏ô seed.ts ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡πà‡∏≠‡∏ô)");
      process.exit(1);
    }

    // 3. ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á (Clear Data)
    await MarketItem.deleteMany({});
    console.log("üßπ Cleared old market items...");

    // 4. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (12 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
    const items = [
      {
        title: "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏ï‡∏≤‡πÅ‡∏î‡∏á‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≤‡∏¢",
        description: "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏ó‡∏≥‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏≤‡∏£‡∏Å‡∏±‡∏ô‡∏ö‡∏π‡∏î ‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô ‡∏ó‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ú‡∏±‡∏Å‡∏ï‡πâ‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏°‡∏≤‡∏Å",
        price: 50,
        category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        contact_info: "081-234-5678 (‡∏õ‡πâ‡∏≤‡πÅ‡∏°‡∏ß)",
        image_url: "https://images.unsplash.com/photo-1541518763669-27fef04b14ea?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏≤‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà",
        description: "‡∏á‡∏≤‡∏ô‡∏ù‡∏µ‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏Å‡∏™‡∏≤‡∏ô‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏ú‡πâ‡∏≤‡∏Å‡πá‡πÑ‡∏î‡πâ",
        price: 150,
        category: "‡∏á‡∏≤‡∏ô‡∏ù‡∏µ‡∏°‡∏∑‡∏≠",
        contact_info: "089-999-8888 (‡∏•‡∏∏‡∏á‡∏ö‡∏∏‡∏ç)",
        image_url: "https://images.unsplash.com/photo-1615831576752-972cb7a7d4db?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á",
        description: "‡∏™‡∏†‡∏≤‡∏û 90% ‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏¢‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡∏°‡∏µ‡∏ï‡∏£‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ ‡∏õ‡∏±‡πà‡∏ô‡πÑ‡∏õ‡∏ï‡∏•‡∏≤‡∏î‡∏™‡∏ö‡∏≤‡∏¢‡πÜ",
        price: 1200,
        category: "‡∏Ç‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á",
        contact_info: "Line: bike2hand",
        image_url: "https://images.unsplash.com/photo-1485965120184-e224f723d621?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏£‡∏±‡∏ö‡∏ã‡πà‡∏≠‡∏°‡∏õ‡∏£‡∏∞‡∏õ‡∏≤/‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏¢‡πà‡∏≠‡∏¢",
        description: "‡∏Å‡πä‡∏≠‡∏Å‡∏£‡∏±‡πà‡∏ß ‡πÑ‡∏ü‡∏î‡∏±‡∏ö ‡∏õ‡∏•‡∏±‡πä‡∏Å‡πÄ‡∏™‡∏µ‡∏¢ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ñ‡∏¥‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á",
        price: 300,
        category: "‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",
        contact_info: "082-555-6666 (‡∏ä‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ä‡∏≤‡∏¢)",
        image_url: "https://images.unsplash.com/photo-1581244277943-fe4a9c777189?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏â‡∏≤‡∏ö‡∏≠‡∏ö‡πÄ‡∏ô‡∏¢",
        description: "‡∏Å‡∏£‡∏≠‡∏ö ‡∏´‡∏≠‡∏° ‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏±‡∏ô ‡∏ó‡∏≥‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏≠‡∏°‡∏ó‡∏≠‡∏á‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô",
        price: 35,
        category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        contact_info: "086-111-2222",
        image_url: "https://images.unsplash.com/photo-1604382354936-07c5d9983bd3?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏ú‡πâ‡∏≤‡∏•‡∏î‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô",
        description: "‡πÄ‡∏¢‡πá‡∏ö‡πÄ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡πâ‡∏≤‡∏ù‡πâ‡∏≤‡∏¢ ‡∏•‡∏≤‡∏¢‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å ‡∏ã‡∏±‡∏Å‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏á‡πà‡∏≤‡∏¢",
        price: 89,
        category: "‡∏á‡∏≤‡∏ô‡∏ù‡∏µ‡∏°‡∏∑‡∏≠",
        contact_info: "‡∏õ‡πâ‡∏≤‡∏ô‡πâ‡∏≠‡∏¢ ‡∏´‡∏°‡∏π‡πà 4",
        image_url: "https://images.unsplash.com/photo-1597484661643-2f5fef640dd1?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ò‡∏£‡∏£‡∏°‡∏∞‡∏ä‡∏∏‡∏î‡πÉ‡∏´‡∏ç‡πà",
        description: "‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ò‡∏£‡∏£‡∏°‡∏∞ ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡∏≠‡∏¢‡∏≤‡∏Å‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠",
        price: 100,
        category: "‡∏Ç‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á",
        contact_info: "‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó",
        image_url: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏ú‡∏±‡∏Å‡∏õ‡∏•‡∏≠‡∏î‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏©‡∏£‡∏ß‡∏°‡∏°‡∏¥‡∏ï‡∏£",
        description: "‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤ ‡∏Å‡∏ß‡∏≤‡∏á‡∏ï‡∏∏‡πâ‡∏á ‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á ‡∏õ‡∏•‡∏π‡∏Å‡πÄ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏¢‡∏≤‡∏Ü‡πà‡∏≤‡πÅ‡∏°‡∏•‡∏á ‡∏°‡∏±‡∏î‡∏•‡∏∞ 10 ‡∏ö‡∏≤‡∏ó",
        price: 10,
        category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        contact_info: "‡∏™‡∏ß‡∏ô‡∏•‡∏∏‡∏á‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡πå",
        image_url: "https://images.unsplash.com/photo-1540420773420-3366772f4999?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏û‡∏ß‡∏á‡∏°‡∏≤‡∏•‡∏±‡∏¢‡πÑ‡∏´‡∏ß‡πâ‡∏û‡∏£‡∏∞",
        description: "‡∏£‡πâ‡∏≠‡∏¢‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∞ ‡∏™‡∏±‡πà‡∏á‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏î‡πâ",
        price: 20,
        category: "‡∏á‡∏≤‡∏ô‡∏ù‡∏µ‡∏°‡∏∑‡∏≠",
        contact_info: "‡∏¢‡∏≤‡∏¢‡∏ö‡∏±‡∏ß ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î",
        image_url: "https://images.unsplash.com/photo-1596464716127-f2a82984de30?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏ FM ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤",
        description: "‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏ü‡∏±‡∏á‡∏ä‡∏±‡∏î ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏ü‡∏±‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏•‡∏π‡∏Å‡∏ó‡∏∏‡πà‡∏á",
        price: 250,
        category: "‡∏Ç‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á",
        contact_info: "081-999-0000",
        image_url: "https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡∏£‡∏±‡∏ö‡∏™‡∏≠‡∏ô‡∏ñ‡∏±‡∏Å‡∏ô‡∏¥‡∏ï‡∏ï‡∏¥‡πâ‡∏á",
        description: "‡∏™‡∏≠‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏ñ‡∏±‡∏Å‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß ‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô",
        price: 150,
        category: "‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",
        contact_info: "‡∏Ñ‡∏£‡∏π‡∏û‡∏µ‡πà‡πÅ‡∏≠‡∏ô",
        image_url: "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      },
      {
        title: "‡πÑ‡∏Ç‡πà‡πÑ‡∏Å‡πà‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏î‡∏µ",
        description: "‡πÑ‡∏Ç‡πà‡πÑ‡∏Å‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏õ‡∏•‡πà‡∏≠‡∏¢ ‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡πÄ‡∏•‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡πÄ‡∏ä‡πâ‡∏≤ ‡∏ü‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà ‡πÑ‡∏Ç‡πà‡πÅ‡∏î‡∏á‡∏ô‡∏π‡∏ô‡∏™‡∏ß‡∏¢",
        price: 5,
        category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        contact_info: "‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏à",
        image_url: "https://images.unsplash.com/photo-1516467508483-a72120608ae0?auto=format&fit=crop&w=800&q=80",
        seller: seller._id
      }
    ];

    // 5. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database
    await MarketItem.insertMany(items);
    console.log("‚úÖ Seeded 12 Market Items Successfully!");

    process.exit();
  } catch (error) {
    console.error("‚ùå Error seeding market:", error);
    process.exit(1);
  }
};

seedMarket();