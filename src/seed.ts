import mongoose from 'mongoose';
import dotenv from 'dotenv';
import Activity from './models/Activity'; // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á

dotenv.config();

// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô (‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô)
const titles = [
  "‡∏£‡∏≥‡πÑ‡∏ó‡πÄ‡∏Å‡πä‡∏Å‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡πâ‡∏≤", "‡∏™‡∏ß‡∏î‡∏°‡∏ô‡∏ï‡πå‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏°", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô", 
  "‡∏™‡∏≠‡∏ô‡∏ñ‡∏±‡∏Å‡πÑ‡∏´‡∏°‡∏û‡∏£‡∏°", "‡πÅ‡∏≠‡πÇ‡∏£‡∏ö‡∏¥‡∏Ñ‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏ß‡∏±‡∏¢", "‡∏™‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (Line) ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô",
  "‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏•‡∏µ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û", "‡∏´‡∏°‡∏≤‡∏Å‡∏£‡∏∏‡∏Å‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≠‡∏á", "‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏™‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß", "‡∏•‡∏µ‡∏•‡∏≤‡∏®‡∏¢‡πâ‡∏≠‡∏ô‡∏¢‡∏∏‡∏Ñ"
];

const locations = [
  "‡∏™‡∏ß‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô", "‡∏ß‡∏±‡∏î‡∏õ‡πà‡∏≤‡∏ä‡∏∏‡∏°‡∏ä‡∏ô", "‡∏®‡∏≤‡∏•‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô", 
  "‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û", "‡∏•‡∏≤‡∏ô‡∏≠‡πÄ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå"
];

const categories = ['‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', '‡∏ò‡∏£‡∏£‡∏°‡∏∞', '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', '‡∏á‡∏≤‡∏ô‡∏ù‡∏µ‡∏°‡∏∑‡∏≠', '‡∏ô‡∏±‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏≤‡∏£', '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
const sample = (array: any[]) => array[Math.floor(Math.random() * array.length)];

const seedData = async () => {
  try {
    // 1. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database
    await mongoose.connect(process.env.MONGO_URI as string);
    console.log("üîå Connected to DB...");

    // 2. ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô (Clean Slate) ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥
    await Activity.deleteMany({});
    console.log("üßπ Cleared old data...");

    // 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà 40 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    const activities = [];
    
    for (let i = 0; i < 40; i++) {
      // ‡∏™‡∏∏‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤)
      const randomDay = Math.floor(Math.random() * 90); 
      const date = new Date();
      date.setDate(date.getDate() + randomDay);

      activities.push({
        title: `${sample(titles)} (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${i + 1})`,
        description: "‡∏Ç‡∏≠‡πÄ‡∏ä‡∏¥‡∏ç‡∏ä‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÉ‡∏à...",
        category: sample(categories),
        location: sample(locations),
        date: date,
        maxParticipants: Math.floor(Math.random() * 20) + 10, // ‡∏£‡∏±‡∏ö 10-30 ‡∏Ñ‡∏ô
      });
    }

    // 4. ‡∏¢‡∏±‡∏î‡∏•‡∏á Database ‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
    await Activity.insertMany(activities);
    console.log("‚úÖ Seeded 40 Activities Successfully!");

    // 5. ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
    process.exit();

  } catch (error) {
    console.error("‚ùå Error seeding data:", error);
    process.exit(1);
  }
};

seedData();